# 缓存重用特性


## 定义

    Python 缓冲机制是为提高程序执行的效率服务的，实际上就是在 Python 解释器启动时从内存空间中开辟出一小部分，用来存储高频使用的数据，这样可以大大减少高频使用的数据创建时申请内存和销毁时撤销内存的开销。
    Python 在存储数据时，会根据数据的读取频繁程度以及内存占用情况来考虑，是否按照一定的规则将数据存储缓存中。那么问题来了，内存重用机制适用于哪些基本数据类型呢？

## 表格


| 数据类型                       | 生效范围   |  是否可以重用  |
| --------                      | -----:   | :----:  |
| 范围在[-5, 256]之间的小整数       | 全局 | 只要在本代码块内创建过，就直接缓存，后续不再创建  |
| bool 类型                      | 全局 | 只要在本代码块内创建过，就直接缓存，后续不再创建  |
| 字符串类型数据                   | 本代码块 |  只要在本代码块内创建过，就直接缓存，后续不再创建  |
| 大于 256的整数                  | 本代码块 |  只要在本代码块内创建过，就直接缓存，后续不再创建  |
| 大于 0 的浮点型小数              | 本代码块 |  只要在本代码块内创建过，就直接缓存，后续不再创建  |
| 小于 0 的浮点型小数              | --- |  每次都重新创建  |
| 小于 -5 的整数                  | --- |  每次都重新创建  |

小于 -5 的整数

## 例子
> * id()返回变量的内存地址
> * is 判断内存地址是否相同，id相同值一定相同
> * == 判断的是值是否相同，值相同id不一定相同

```
int1 = -6
int2 = -6

print(id(int1))
print(id(int2))
print("--------")

isMale = True
notFemale = True

print(id(isMale))
print(id(notFemale))
print("--------")

int258 = 258
int258c = 258
print(id(int258))
print(id(int258c))
print("--------")

str1 = "#hello" * 2
str2 = "#hello" * 2
print(id(str1))
print(id(str2))
print(str1 is str2)
print("--------")

float1 = -9.91
float2 = -9.91
print(id(float1))
print(id(float2))
print(float1==float2)
```

```
4348483152
4348483120
--------
4304462208
4304462208
--------
4347804368
4347804368
--------
4348609648
4348609712
False
--------
4326949608
4326949392
True

```

## 参考文献

> * [Python基础-代码块，缓存机制](https://www.cnblogs.com/zyiy/p/12507936.html)
> * [Python缓存重用机制](http://c.biancheng.net/view/5756.html)
    

